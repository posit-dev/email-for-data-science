# MJML Module

A Python implementation of MJML tags for building responsive email templates programmatically.

## Overview

This module provides Python functions for creating MJML markup, the responsive email framework. Instead of writing raw MJML XML, you can use Python functions to build your email templates.

## Features

- **Automatic tag generation**: Tags are auto-generated from the official MJML specification
- **Leaf tag safety**: Ending tags (like `mj-text`, `mj-button`) only accept content, not MJML children
- **Flexible rendering**: Convert your Python MJML structures to valid MJML markup via [mjml2html](https://github.com/mgd020/mjml-python)

## Installation

This module is part of the `emailer_lib` package:

```python
from emailer_lib import mjml
```

## Quick Start

```python
from emailer_lib.mjml import mjml, body, section, column, text

# Build an MJML email structure
email = mjml(
    body(
        section(
            column(
                text(content="Hello, World!", color="#ff6600")
            )
        )
    )
)

# Render to MJML markup
mjml_string = email.render()
```

## Tag Types

### Container Tags

These tags accept children (other MJML components) and optional content:

- Structure: `mjml`, `head`, `body`, `include`
- Layout: `section`, `column`, `group`, `wrapper`
- Components: `accordion`, `carousel`, `hero`, `navbar`, `social`
- Configuration: `attributes`, `breakpoint`, `font`, `html_attributes`, `style`, `title`

Example:
```python
section(
    column(
        text(content="First column")
    ),
    column(
        text(content="Second column")
    ),
    background_color="#f0f0f0"
)
```

### Leaf/Ending Tags

These tags accept text or HTML content but **not** MJML children:

- `button` - Call-to-action buttons
- `text` - Text content with HTML support
- `table` - HTML tables
- `raw` - Raw HTML content
- `accordion_text`, `accordion_title` - Accordion content
- `navbar_link` - Navigation links
- `social_element` - Social media icons
- `carousel_image` - Carousel images

Example:
```python
text(
    content="<strong>Bold text</strong> and <a href='#'>a link</a>",
    font_size="16px",
    color="#333333"
)

button(
    content="Click Here",
    href="https://example.com",
    background_color="#007bff"
)
```

## Core Classes

### `MJMLTag`

The base class for all MJML elements. Can be instantiated directly or via helper functions.

```python
from emailer_lib.mjml import MJMLTag

tag = MJMLTag(
    "mj-text",
    content="Hello",
    color="#ff6600"
)
```

### `TagAttrDict`

A dictionary type for tag attributes.

## Examples

### Simple Email

```python
from emailer_lib.mjml import mjml, head, body, section, column, text, title

email = mjml(
    head(
        title(content="Welcome Email")
    ),
    body(
        section(
            column(
                text(content="Welcome to our service!")
            )
        )
    )
)
```

### Multi-column Layout

```python
from emailer_lib.mjml import body, section, column, text, image

layout = body(
    section(
        column(
            image(src="https://example.com/logo.png"),
            text(content="Column 1")
        ),
        column(
            text(content="Column 2")
        ),
        column(
            text(content="Column 3")
        )
    )
)
```

### Using Attributes

```python
from emailer_lib.mjml import section, column, text

# Attributes as kwargs
section(
    column(
        text(content="Styled text", color="#ff0000", font_size="20px")
    ),
    background_color="#f5f5f5",
    padding="20px"
)
```

## Rendering

Use the `.render()` method to convert MJML structures to markup:

```python
mjml_markup = email.render()
# Pass to MJML API or tool for HTML conversion
```

## API Reference

For detailed documentation of all tags and their attributes, see the [API Reference](https://posit-dev.github.io/email-for-data-science/reference/).

## Resources

- [Official MJML Documentation](https://documentation.mjml.io/)
- [MJML GitHub Repository](https://github.com/mjmlio/mjml)

## Development

The tag functions in `tags.py` are auto-generated by `scripts/generate-tags.py`. To regenerate:

```bash
make generate-mjml-tags
```

**Do not edit `tags.py` directly** - your changes will be overwritten.
